---
- name: Create APController container path
  ansible.builtin.file:
    path: "/home/{{ user_name }}/apcontroller"
    state: directory
  when: ansible_facts['distribution'] == 'Debian'

- name: Create APController data path
  ansible.builtin.file:
    path: "/home/{{ user_name }}/apcontroller/data"
    state: directory
  when: ansible_facts['distribution'] == 'Debian'

- name: Create APController work path
  ansible.builtin.file:
    path: "/home/{{ user_name }}/apcontroller/work"
    state: directory
  when: ansible_facts['distribution'] == 'Debian'

- name: Create APController logs path
  ansible.builtin.file:
    path: "/home/{{ user_name }}/apcontroller/logs"
    state: directory
  when: ansible_facts['distribution'] == 'Debian'

- name: APcontroller Service
  ansible.builtin.template:
    src: apcontroller.service.j2
    dest: "/etc/systemd/system/apcontroller.service"
  when: ansible_facts['distribution'] == 'Debian'

- name: Enable APcontroller
  ansible.builtin.systemd:
    name: apcontroller.service
    enabled: yes
  when: ansible_facts['distribution'] == 'Debian'

- name: Apcontroller script
  ansible.builtin.template:
    src: apcontroller.sh.j2
    dest: "/usr/local/bin/apcontroller.sh"
  when: ansible_facts['distribution'] == 'Debian'

- name: Update apcontroller container script
  ansible.builtin.template:
    src: update_apcontroller_container.sh.j2
    dest: "/usr/local/bin/update_apcontroller_container.sh"
  when: ansible_facts['distribution'] == 'Debian'
